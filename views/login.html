<!DOCTYPE html>
<html>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>

  <title>Помощник 4</title>

  <link href="/w2ui-1.5/w2ui-1.5.min.css" rel="stylesheet"/>
  <script src="/jquery/jquery.min.js" type="text/javascript"></script>
  <script src="/w2ui-1.5/w2ui-1.5.min.js" type="text/javascript"></script>
</head>
<body> 
  <div style ="position: absolute; top: 50%; left:50%; width: 400px; height: 200px; margin-top: -100px; margin-left: -200px;">
      <div id="loginForm">
	</div>
  <script>
    $(function () {
      w2utils.locale("ru-ru");
      $('#loginForm').w2form({
        name: 'loginForm',
        header: '<div style="text-align: left";> CRM Помощник </div>',
        url: '/login',
        fields: [
          { field: 'username', type: 'text', required: true, html: {label: 'Имя пользователя:', attr: 'style="width: 200px"; autocomplete="new-text"'} },
          { field: 'password',  type: 'password', required: true, html: {label: 'Пароль:', attr: 'style="width: 200px"; autocomplete="new-password"'} },
        ],
        actions: {
          Ok : function() { this.save(); }
        },
        onSave: function(event) {
          let edata = $.extend({}, event);
          if (edata.xhr.status === 200) {
            window.location.href="/";   
          }
          if (edata.xhr.status === 201) {
            w2ui.loginForm.message(edata.xhr.responseJSON);
          }
        }
      });
    });
	</script>
</body>
</html>